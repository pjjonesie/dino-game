<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Dino</title>

<style>
html, body {
  margin: 0;
  height: 100%;
  background: transparent;
  overflow: hidden;
}

/* This keeps the real chrome sprites but makes them black */
canvas {
  background: transparent !important;
  filter: brightness(0) saturate(100%);
}
</style>
</head>

<body>

<canvas id="game"></canvas>

<script src="https://wayou.github.io/t-rex-runner/js/runner.js"></script>

<script>
/* ===========================
   FONT PATCH
   Arial Black + Condensed Look
   =========================== */

(function() {

const FONT = '900 28px "Arial Black", Arial, sans-serif';
const BIGFONT = '900 46px "Arial Black", Arial, sans-serif';
const CONDENSE = 0.84;

function shouldStyleText(txt) {

  if (!txt) return false;

  txt = String(txt);

  if (/^\d+$/.test(txt)) return true;
  if (/HI/.test(txt)) return true;
  if (/GAME OVER/i.test(txt)) return true;
  if (/RESTART/i.test(txt)) return true;

  return false;
}

const proto = CanvasRenderingContext2D.prototype;
const original = proto.fillText;

proto.fillText = function(text, x, y, maxWidth) {

  if (!shouldStyleText(text)) {
    return original.call(this, text, x, y, maxWidth);
  }

  let useBig = /GAME OVER/i.test(text);

  this.save();

  this.scale(CONDENSE, 1);

  let newX = x / CONDENSE;

  this.font = useBig ? BIGFONT : FONT;
  this.fillStyle = "#000";

  let result = original.call(this, text, newX, y, maxWidth);

  this.restore();

  return result;
}

})();
</script>

</body>
</html>

